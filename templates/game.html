{% extends "base.html" %}
{% block content %}
<div id="hands_platform">
    <div class="score">
        <div class="score_background">
            {{ score.pc }}
        </div>
        <div class="score_background" style="border: none; background:none">:</div>
        <div class="score_background">
            {{ score.user }}
        </div>
    </div>
    <div id="hand-left" >
        <img class="hand-image"  id="hand-left-image" src="{{ pc_image }}" alt="">
    </div>
    <div id="hand-right">
        <img class="hand-image" id="hand-right-image" src="{{ user_image }}" alt="">
    </div>
</div>

    

<div id="user_options">
    <form action="/game" id="form_map" method="POST">
        <input type="text" name="user_choose" id="user_choose" value="" hidden>
        <input type="submit" name="send" hidden>
    </form>
    <img src="/static/hands-test.png" alt="" width="" usemap="#user-option" loading="lazy" id="choose_image">
    <map name="user-option">
        <area target="" alt="" title="" href="javascript:edit_submit('r')" coords="86,154,17,20" shape="rect">
        <area target="" alt="" title="" href="javascript:edit_submit('s')" coords="104,18,183,153" shape="rect">
        <area target="" alt="" title="" href="javascript:edit_submit('p')" coords="202,18,272,154" shape="rect">
    </map>
</div>
<script>
    if (window.location.href.includes("?")){
        let left_hand = document.getElementById("hand-left");
        left_hand.className="heartbeat";
        let right_hand = document.getElementById("hand-right");
        right_hand.className="heartbeat";
    }
    function edit_submit(value){
        let left_hand = document.getElementById("hand-left-image")
        left_hand.src= "/static/rock-left.png"
        left_hand.className="hand-left-animation"
        let right_hand= document.getElementById("hand-right-image")
        right_hand.src= "/static/rock-right.png"
        right_hand.className="hand-right-animation"
        setTimeout(function(){ 
            const user_choose = document.getElementById("user_choose");
            user_choose.value = value
            const mapform = document.getElementById("form_map")
            mapform.submit()
        }, 1000);

        
    }
</script>
{% endblock %}